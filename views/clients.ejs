<%- include('./partials/navbar'); %>

  <!-- <div class="d-flex justify-content-center"> <button class="btn btn-primary mx-2" type="button" onclick="window.location.href='/app/addClient'">Ajouter un client <i class="fas fa-plus-circle mr-1"></i> </button> <button class="btn btn-primary
  mx-2" type="button" onclick="window.location.href='/app/addClient'">Tout Afficher <i class="fas fa-search mr-1"></i> </button> <button class="btn btn-primary mx-2" type="button" onclick="window.location.href='/app/addClient'">Rechercher <i class="fas
  fa-search mr-1"></i> </button> </div> -->

  <div class="card col-12 col-md-11 mx-auto">
    <div class="card-header bg-transparent">
      <h4 class="text-uppercase text-center ls-1 py-1 mb-0">Clients</h4>
    </div>
    <!-- <div class="card-header py-0">
      <div class="row">
        <div class="p-0 m-0">
          <button class="btn btn-sm btn-outline-primary" type="button" onclick="window.location.href='/app/addClient'" style="height:100%;" data-toggle="tooltip" data-placement="bottom" title="Ajouter un Client">
            <i class="fas fa-plus-circle px-3 searchIcon"></i>
          </button>
        </div>
        <form class="col" action="/app/clientsSearch" method="POST">
          <div class="form-group mb-0">
            <div class="input-group input-group-lg input-group-flush">
              <div class="input-group-prepend">
                <div class="input-group-text">
                  <span class="fas fa-search"></span>
                </div>
              </div>
              <input type="search" name="clientsSearch" value="<%= search != 'any' ? search : '' %>" class="form-control" placeholder="Rechercher">
            </div>
          </div>
        </form>
      </div>
    </div> -->
    <div class="card-body" style="padding-left:0;padding-right:0;">
      <!-- <form class="d-none d-md-block my-2" action="/app/clientsSearch" method="POST"> <div class="d-flex align-items-center justify-content-around col-12 mb-3 mx-auto"> <div class="input-group col-4"> <button class="btn btn-primary" type="button"
      onclick="window.location.href='/app/addClient'">Ajouter un client <i class="fas fa-plus-circle mr-1"></i> </button> </div> <div class="input-group col-8"> <input type="text" value="<%= search != 'any' ? search : '' %>" name="clientsSearch"
      class="form-control" placeholder="Recherche" aria-label="Recherche" aria-describedby="Recherche"> <div class="input-group-append"> <button class="btn btn-outline-primary d-inline-block" type="button" onclick="return document.location.reload();"> <i
      class="far fa-times-circle fa-lg align-middle"></i> </button> <button class="btn btn-outline-primary" type="submit" id="Rechercher"> <i class="fas fa-search"></i> </button> </div> </div> </div> </form> <form class="d-block d-md-none"
      action="/app/clientsSearch" method="POST"> <div class="row mb-4"> <button class="btn btn-primary mx-auto" type="button" onclick="window.location.href='/app/addClient'">Ajouter un client <i class="fas fa-plus-circle mr-1"></i> </button> </div> <div
      class="row mb-3"> <div class="input-group col"> <input type="text" value="<%= search != 'any' ? search : '' %>" name="clientsSearch" class="form-control" placeholder="Recherche" aria-label="Recherche" aria-describedby="Recherche"> <div
      class="input-group-append"> <button class="btn btn-outline-primary d-inline-block" type="button" onclick="return document.location.reload();"> <i class="far fa-times-circle fa-lg align-middle"></i> </button> <button class="btn btn-outline-primary"
      type="submit" id="Recherche"> <i class="fas fa-search"></i> </button> </div> </div> </div> </form> -->

      <div class="table-responsive" style="min-height: 50vh;">
        <div>
          <table class="table align-items-center table-flush" id="datatable-basic">
            <thead class="thead-light">
              <tr>
                <th scope="col">Nom</th>
                <th class="d-none d-md-table-cell" scope="col">Ville</th>
                <th class="d-none d-md-table-cell" scope="col">Adresse</th>
                <th scope="col" class="text-right">Actions</th>
              </tr>
            </thead>
            <tbody class="list">
              <% clients.forEach(function(client) { %>
                <tr id="<%= client._id %>">
                  <th scope="row">
                    <div class="media align-items-center">
                      <div class="media-body">
                        <span class="nom mb-0 text-sm">
                          <a href="/app/client/<%= client.id %>" style="color: #525F7F;"><%= client.name %></a>
                        </span>
                      </div>
                    </div>
                  </th>
                  <td class="d-none d-md-table-cell">
                    <%= client.city %>
                  </td>
                  <td class="d-none d-md-table-cell">
                    <%= client.address %>
                  </td>
                  <td class="text-right">
                    <div class="dropdown">
                      <a class="btn btn-sm btn-icon-only text-light" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="fas fa-ellipsis-v"></i>
                      </a>
                      <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">
                        <a class="dropdown-item" href="/app/client/<%= client.id %>">Afficher le Profil</a>
                        <a class="dropdown-item" href="/app/createFacture/<%= client.id %>">Facturer le Client</a>
                        <a class="dropdown-item" href="/app/createDevis/<%= client.id %>">Faire un Devis</a>
                        <a class="dropdown-item" href="/app/updateClient/<%= client.id %>">Modifier les Informations</a>
                        <a class="dropdown-item text-red deleteBtn" href="/app/deleteClient/<%= client.id %>" id="/app/deleteClient/<%= client.id %>">Supprimer le Client</a>
                      </div>
                    </div>
                  </td>
                </tr>
                <% }) %>

                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <%- include('./partials/messages'); %>

        <script src="/js/clients.js" charset="utf-8"></script>
